!function(){"use strict";angular.module("smuApplication",["ngMaterial","ngMessages","ngResource","ngRoute","smuControllers","smuDirectives","smuFactories","smuFilters","smuServices"]),angular.module("smuControllers",[]),angular.module("smuDirectives",[]),angular.module("smuFactories",[]),angular.module("smuFilters",[]),angular.module("smuServices",[])}(),function(){"use strict";function e(e,t,o){e.debugInfoEnabled(!0),o.defaults.actions.query.isArray=!1,t.theme("default").primaryPalette("brown",{"default":"50","hue-1":"50","hue-2":"600","hue-3":"A100"}).accentPalette("teal",{"default":"500","hue-1":"50","hue-2":"600","hue-3":"A100"}).warnPalette("red")}angular.module("smuApplication").config(e),e.$inject=["$compileProvider","$mdThemingProvider","$resourceProvider"]}(),function(){"use strict";angular.module("smuApplication").constant("incrementTypes",{a:{value:"QUARTER_HOUR",label:"Quarter hour",minutes:15},b:{value:"HOUR",label:"Hour",minutes:60},c:{value:"DAY",label:"Day",minutes:480}}).constant("priorityTypes",{a:{value:"HIGHEST",label:"Highest priority"},b:{value:"HIGH",label:"High priority"},c:{value:"NORMAL",label:"Normal priority"},d:{value:"LOW",label:"Low priority"},e:{value:"LOWEST",lable:"Lowest priority"}}).constant("repeatTypes",{a:{value:"DAILY",label:"Every day"},b:{value:"WEEKLY",label:"Every week"},c:{value:"FORTNIGHTLY",label:"Every 2 weeks"},d:{value:"MONTHLY",label:"Every month"}}).constant("targetTypes",{a:{value:"TargetCheckbox",label:"Checkbox"},b:{value:"TargetRecurringCheckbox",label:"Recurring Checkbox"},c:{value:"TargetDuration",label:"Duration"}}).constant("configApi",{protocol:null,host:null,path:"/api/v1/"}).constant("configChart",{bar:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},line:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].lineColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}}).constant("configMap",{tile:{urlTemplate:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},icon:{company:{iconUrl:"/images/nearby/icon.svg",shadowUrl:"/images/nearby/icon-shadow.svg",iconSize:[50,50],shadowSize:[50,50],iconAnchor:[50,50],shadowAnchor:[5,5],popupAnchor:[0,0]},you:{iconUrl:"/images/nearby/icon.svg",shadowUrl:"/images/nearby/icon-shadow.svg",iconSize:[50,50],shadowSize:[50,50],iconAnchor:[50,50],shadowAnchor:[5,5],popupAnchor:[0,0]}}})}(),function(){"use strict";function e(e){e.when("/gamification",{templateUrl:o("gamification/shoot")}).when("/gamification/leaderboard",{templateUrl:o("gamification/leaderboard")}).when("/gamification/trophies",{templateUrl:o("gamification/trophies")}).when("/goals",{templateUrl:o("goals/overview")}).when("/goals/category/:categoryId/edit",{templateUrl:o("goals/category/edit")}).when("/goals/category/:categoryId/goal/create",{templateUrl:o("goals/goal/create"),controller:"GoalsCtrl",controllerAs:"vm"}).when("/goals/category/:categoryId/goal/:goalId/edit",{templateUrl:o("goals/goal/edit"),controller:"GoalsCtrl",controllerAs:"vm"}).when("/goals/category/:categoryId/goal/:goalId/target/update/create",{templateUrl:o("goals/goal/target/update/create"),controller:"GoalsCtrl",controllerAs:"vm"}).when("/goals/statistics",{templateUrl:o("goals/statistics"),controller:"GoalsStatisticsCtrl"}).when("/goals/category/:categoryId/goal/:goalId/statistics",{templateUrl:o("goals/goal/statistics"),controller:"GoalsStatisticsCtrl"}).when("/goals/category/add",{templateUrl:o("goals/category/add")}).when("/goals/statistics",{templateUrl:o("goals/statistics"),controller:"GoalsStatisticsGlobalCtrl"}).when("/nearby",{templateUrl:o("nearby/map")}).when("/registration/step/1/of/4",{templateUrl:o("registration/1-user-account"),controller:"RegistrationCtrl",step:1,steps:4}).when("/registration/step/2/of/4",{templateUrl:o("registration/2-personal-profile"),controller:"RegistrationCtrl",step:2,steps:4}).when("/registration/step/3/of/4",{templateUrl:o("registration/3-company-profile"),controller:"RegistrationCtrl",step:3,steps:4}).when("/registration/step/4/of/4",{templateUrl:o("registration/4-completed"),controller:"RegistrationCtrl",step:4,steps:4}).when("/settings",{templateUrl:o("settings/menu")}).when("/log-in",{templateUrl:o("log-in")}).when("/splash",{templateUrl:o("splash")}).otherwise({redirectTo:"/splash"})}function t(e,t){var r=["validation-messages"],n=["registration/1-user-account","registration/2-personal-profile","registration/3-company-profile","registration/4-completed"];r.forEach(function(o){e.get(a(o),{cache:t})}),n.forEach(function(a){e.get(o(a),{cache:t})})}function o(e){return"/templates/views/"+e+".html"}function a(e){return"/templates/partials/"+e+".html"}angular.module("smuApplication").config(e).run(t),e.$inject=["$routeProvider"],t.$inject=["$http","$templateCache"]}(),function(){"use strict";function e(e,t){e.items=[{name:"Hangout",icon:"hangout"},{name:"Mail",icon:"mail"},{name:"Message",icon:"message"},{name:"Copy",icon:"copy"},{name:"Facebook",icon:"facebook"},{name:"Twitter",icon:"twitter"}],e.listItemClick=function(t){e.items[t]}}angular.module("smuControllers").controller("BottomSheetCtrl",e),e.$inject=["$scope","$mdBottomSheet"]}(),function(){"use strict";function e(e,t,o){t.categoryId=e.categoryId,t.goalId=e.goalId;{var a=document.getElementById("smu-chart-0").getContext("2d"),r={labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[12,10,11,9,5,3,2]}]};new Chart(a).Bar(r,o.bar)}}angular.module("smuControllers").controller("GoalsStatisticsCtrl",e),e.$inject=["$routeParams","$scope","configChart"]}(),function(){"use strict";function e(e,t,o,a,r,n,i,s,l,c,u){function g(e){return e===l.a.value}function d(e){return e===l.b.value}function m(e){return e===l.c.value}function p(){o.info("goalCreate: ",b.goal),b.goal.user_id=1,b.goal.category_id=b.categoryId;var e=new c;e.goal=b.goal,e.$save()}function f(){o.info("goalEdit: ",b.goal)}function y(){var e=0;e<b.time_incrementation?b.time_incrementation--:b.time_incrementation=e}function h(){var e=200;b.time_incrementation<e?b.time_incrementation++:b.time_incrementation=e}function v(){o.info("updateCreate: ",b.goal)}var b=this;o.info("routeParams: ",r),b.categoryId=r.categoryId,b.goalId=r.goalId,b.ui={incrementTypes:i,repeatTypes:s,targetTypes:l,goal:{achieved:!1,duration:null}},b.categories=[],b.goal={target:{time_increment:b.ui.incrementTypes.a.value}},n.$watch("vm.goal.target.time_estimated",function(t,o){if(t){var a=_.find(b.ui.incrementTypes,function(e){return e.value===b.goal.target.time_increment}),r=b.goal.target.time_estimated*a.minutes,n=moment.duration(r,"minutes");moment.locale("en"),60>r?n=n.asMinutes()+" minutes":480>r?(n=n.asHours(),n+=1===n?" hour":" hours"):n=1===n.asDays()?n.asDays()+" day":e("number")(n.asDays(),2)+" days",b.ui.goal.duration=n}}),u.queryWithGoals({userId:1,"sort[order]":"asc"}).$promise.then(function(t){if(b.categories=t.data,o.info("data: ",b.categories),"undefined"!=typeof b.categoryId&&"undefined"!=typeof b.goalId){var a=_.result(_.find(b.categories,function(e){return e.id==b.categoryId}),"goals");b.goal=_.find(a,function(e){return e.id==b.goalId}),o.info("goal loaded: ",b.goal),"undefined"!=typeof b.goal.target.achieved_at&&(b.achieved=null!==b.goal.target.achieved_at,console.log("achieved_at: ",b.goal.target.achieved_at,typeof b.goal.target.achieved_at),n.$watch("vm.achieved",function(e,t){e?null===b.goal.target.achieved_at&&(b.goal.target.achieved_at=new Date):b.goal.target.achieved_at=null})),b.time_incrementation=0,n.$watch("vm.time_incrementation",function(t,o){var a=b.goal.target.time_increment*b.time_incrementation,r=moment.duration(a,"minutes");moment.locale("en"),60>a?r=r.asMinutes()+" minutes":240>a?(r=r.asHours(),r+=1===r?" hour":" hours"):r=1===r.asDays()?r.asDays()+" day":e("number")(r.asDays(),2)+" days"})}},function(e){o.error(e)}),b.isTypeCheckbox=g,b.isTypeRecurringCheckbox=d,b.isTypeDuration=m,b.increment=h,b.decrement=y,b.goalCreate=p,b.goalEdit=f,b.updateCreate=v}angular.module("smuControllers").controller("GoalsCtrl",e),e.$inject=["$filter","$location","$log","$rootScope","$routeParams","$scope","incrementTypes","repeatTypes","targetTypes","GoalResourceFactory","UserCategoryResourceFactory"]}(),function(){"use strict";function e(e){e.leaderboard=[{position:1,score:910,user:{firstName:"Jane"},company:{name:"Arteveldehogeschool"}},{position:2,score:44,user:{firstName:"Olivier"},company:{name:"Superstar-up"}},{position:3,score:30,user:{firstName:"Christel"},company:{name:"Arteveldehogeschool"}}]}angular.module("smuControllers").controller("LeaderboardCtrl",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t,o,a){t.close=function(){a("left").close().then(function(){e.debug("close LEFT is done")})}}angular.module("smuControllers").controller("LeftCtrl",e),e.$inject=["$log","$scope","$timeout","$mdSidenav"]}(),function(){"use strict";function e(e,t,o){e.alert="",e.showGridBottomSheet=function(t){e.alert="",o.show({templateUrl:"templates/partials/bottom-sheet.html",controller:"BottomSheetCtrl",targetEvent:t}).then(function(t){e.alert=t.name+" clicked!"})}}angular.module("smuControllers").controller("MainCtrl",e),e.$inject=["$scope","$timeout","$mdBottomSheet"]}(),function(){"use strict";function e(e,t,o,a,r){var n={location:"<b>{{ title }}</b><i><br>{{ subtitle }}</i><br>{{ address.street }} {{ address.street_number }}<br>{{ address.locality.postal_code }} {{ address.locality.name }}",you:"<b>You</b><br>You are here!"},i=e(n.location),s=L.map("smu-map-0");L.tileLayer(r.tile.urlTemplate,r.tile.options).addTo(s);var l=L.icon(r.icon.company);a.query().$promise.then(function(e){e.data.forEach(function(e){var t=[e.latitude,e.longitude],o=L.marker(t,{icon:l}).addTo(s);o.bindPopup(i(e)).openPopup()})},function(e){t.error(e)}),navigator.geolocation.getCurrentPosition(function(e){var t=[e.coords.latitude,e.coords.longitude];s.setView(t,12);var o=L.icon(r.icon.you),a=L.marker(t,{icon:o}).addTo(s);a.bindPopup(n.you).openPopup()})}angular.module("smuControllers").controller("NearbyCtrl",e),e.$inject=["$interpolate","$log","$scope","LocationResourceFactory","configMap"]}(),function(){"use strict";function e(e,t,o,a,r,n){var i=r;switch(angular.extend(a,i),e.info("step: ",t.current.step),t.current.step){case 1:a.clickHandler=function(){e.info("user: ",a.user),angular.extend(i.user,a.user)};break;case 2:a.clickHandler=function(){e.info("user: ",a.user),angular.extend(i.user,a.user)};break;case 3:a.clickHandler=function(){e.info("user: ",a.user),e.info("company: ",a.company),e.info("address: ",a.address);var t=new n;t.user=i.user,t.$save()}}}angular.module("smuControllers").controller("RegistrationCtrl",e),e.$inject=["$log","$route","$rootScope","$scope","RegistrationFormStateFactory","UserResourceFactory"]}(),function(){"use strict";function e(e){e.menu=[{label:"User account",uri:"#/settings/user-account"},{label:"Personal profile",uri:"#/settings"},{label:"Company profile",uri:"#/settings/"},{label:"Privacy",uri:"#/settings"}]}angular.module("smuControllers").controller("SettingsCtrl",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t){return{require:"^ngModel",restrict:"A",link:function(e,o,a,r){function n(){return i(e)}var i=t(a.smuMatchModel);r.$validators.smuMatchModel=function(){return r.$viewValue===n()},e.$watch(n,function(){r.$$parseAndValidate()})}}}angular.module("smuDirectives").directive("smuMatchModel",e),e.$inject=["$log","$parse"]}(),function(){"use strict";function e(e,t){return{make:function(o){var a=t.protocol?t.protocol:e.protocol(),r=t.host?t.host:e.host(),n=a+"://"+r+t.path+o;return n}}}angular.module("smuFactories").factory("ApiUriFactory",e),e.$inject=["$location","configApi"]}(),function(){"use strict";function e(e,t){return{address:{},company:{},settings:{},user:{}}}angular.module("smuFactories").factory("RegistrationFormStateFactory",e),e.$inject=["$resource","configApi"]}(),function(){"use strict";function e(e,t){return e(t.make("categories/:categoryId"),{categoryId:"@categoryId"},{queryWithGoals:{method:"GET",params:{"include[goals]":!0,"sort[order]":"@order"},isArray:!1}})}angular.module("smuFactories").factory("CategoryResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("companies/:companyId"),{companyId:"@companyId"})}angular.module("smuFactories").factory("CompanyResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("goals/:goalId"),{goalId:"@id"})}angular.module("smuFactories").factory("GoalResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("interest/:interestId"),{interestId:"@interestId"})}angular.module("smuFactories").factory("InterestResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("locations/:locationId"),{locationId:"@locationId"})}angular.module("smuFactories").factory("LocationResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("statistics/:statisticId"),{statisticId:"@statisticId"})}angular.module("smuFactories").factory("StatisticResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("users/:userId/categories/:categoryId"),{userId:"@userId",categoryId:"@categoryId"},{getWithGoals:{method:"GET",params:{"include[goals]":!0}},queryWithGoals:{method:"GET",params:{"include[goals.target.updates]":!0,"sort[order]":"@order"},isArray:!1}})}angular.module("smuFactories").factory("UserCategoryResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("users/:userId/goals/:goalId"),{userId:"@userId",goalId:"@goalId"},{getWithGoals:{method:"GET",params:{"include[target]":!0}},queryWithGoals:{method:"GET",params:{"include[target]":!0,"sort[order]":"@order"},isArray:!1}})}angular.module("smuFactories").factory("UserGoalResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}(),function(){"use strict";function e(e,t){return e(t.make("users/:userId"),{userId:"@userId"})}angular.module("smuFactories").factory("UserResourceFactory",e),e.$inject=["$resource","ApiUriFactory"]}();